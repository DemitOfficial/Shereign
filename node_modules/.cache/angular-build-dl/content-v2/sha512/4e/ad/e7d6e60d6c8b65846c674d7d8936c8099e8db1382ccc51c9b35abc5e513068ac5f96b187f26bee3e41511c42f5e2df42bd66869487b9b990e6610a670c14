!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"14+f":function(n,i,r){"use strict";r.r(i),r.d(i,"PushNotificationModule",function(){return E});var s,o=r("ofXK"),a=r("tyNb"),u=r("tk/3"),c=r("fXoL"),l=r("mrSG"),f=r("Wcq6"),g=r.n(f),d=r("LRne"),b=r("EY2u"),p=r("z6cu"),h=r("HDdC"),j=r("GyhO"),m=r("tf+s"),O=r("pxpQ"),k=r("eIep"),v=r("lJxs"),y=r("UXun"),A=r("aGrj"),w=r("JIr8"),x=r("5+tZ"),M=r("xbPD"),P=r("spgP"),T=new c.InjectionToken("angularfire2.messaging.vapid-key"),N=new c.InjectionToken("angularfire2.messaging.service-worker-registeration"),S=parseInt(g.a.SDK_VERSION,10)<8,C=((s=function e(n,i,s,a,u,c){var f=this;t(this,e);var T=new P.d(a),N=c,C=Object(d.a)(void 0).pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(){return Object(o.A)(s)?b.a:r.e(20).then(r.bind(null,"dB9c"))}),Object(v.a)(function(){return Object(P.g)(n,a,i)}),Object(k.a)(function(e){return Object(P.f)(e.name+".messaging","AngularFireMessaging",e,function(){return Object(l.b)(f,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.messaging(),t.t0=S,!t.t0){t.next=11;break}if(u&&n.usePublicVapidKey(u),t.t1=N,!t.t1){t.next=11;break}return t.t2=n,t.next=9,N;case 9:t.t3=t.sent,t.t2.useServiceWorker.call(t.t2,t.t3);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}},t)}))},[u,N])}),Object(y.a)({bufferSize:1,refCount:!1}));this.requestPermission=C.pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(e){return g.a.messaging.isSupported()?e.requestPermission():Object(p.a)("Not supported.")})),this.getToken=C.pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(e){return Object(l.b)(f,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g.a.messaging.isSupported()||"granted"!==Notification.permission){t.next=16;break}if(!S){t.next=5;break}return t.next=4,e.getToken();case 4:return t.abrupt("return",t.sent);case 5:if(!N){t.next=11;break}return t.next=8,N;case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0=null;case 12:return n=t.t0,t.next=15,e.getToken({vapidKey:u,serviceWorkerRegistration:n});case 15:return t.abrupt("return",t.sent);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}},t)}))}));var q=new h.a(function(e){navigator.permissions.query({name:"notifications"}).then(function(t){t.onchange=function(){return e.next()}})}),I=C.pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(A.a)(q),Object(A.a)(this.getToken));return this.tokenChanges=C.pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(){return g.a.messaging.isSupported()?Object(j.a)(f.getToken,I):b.a})),this.messages=C.pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(e){return g.a.messaging.isSupported()?new h.a(function(t){return e.onMessage(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})}):b.a})),this.requestToken=Object(d.a)(void 0).pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(){return f.requestPermission}),Object(w.a)(function(){return Object(d.a)(null)}),Object(x.b)(function(){return f.tokenChanges})),this.deleteToken=function(e){return C.pipe(Object(m.a)(T.outsideAngular),Object(O.b)(T.insideAngular),Object(k.a)(function(t){return t.deleteToken(e||void 0)}),Object(M.a)(!1))},Object(P.i)(this,C,a)}).\u0275fac=function(e){return new(e||s)(c["\u0275\u0275inject"](P.c),c["\u0275\u0275inject"](P.b,8),c["\u0275\u0275inject"](c.PLATFORM_ID),c["\u0275\u0275inject"](c.NgZone),c["\u0275\u0275inject"](T,8),c["\u0275\u0275inject"](N,8))},s.\u0275prov=Object(c["\u0275\u0275defineInjectable"])({factory:function(){return new s(Object(c["\u0275\u0275inject"])(P.c),Object(c["\u0275\u0275inject"])(P.b,8),Object(c["\u0275\u0275inject"])(c.PLATFORM_ID),Object(c["\u0275\u0275inject"])(c.NgZone),Object(c["\u0275\u0275inject"])(T,8),Object(c["\u0275\u0275inject"])(N,8))},token:s,providedIn:"any"}),s);Object(P.e)(C,[{deleteToken:null,getToken:null,onMessage:null,onBackgroundMessage:null,onTokenRefresh:null,requestPermission:null,setBackgroundMessageHandler:null,useServiceWorker:null,usePublicVapidKey:null}]);var q,I,J,K=[{path:"send-notification",component:(q=function(){function n(e,i){t(this,n),this.http=e,this.angularFirebaseMessaging=i,this._token="DemitTalha",this.title="NotificationTitle",this.text="Notification Text",this.type="Notification",this.senderid="",this.senderimage=""}var i,r,s;return i=n,(r=[{key:"ngOnInit",value:function(){this.send()}},{key:"sendPushMessage",value:function(){if(this.createuniqueid(),null!=this._token){var e=this.constructFCMPayload("/topics/"+this._token);console.log(this._token);try{var t=new u.d({"Content-Type":"application/json; charset=UTF-8",Authorization:"key=AAAAAK4x17k:APA91bEGgK5wCHTH7cKSrhJ8hfEjYpP3S7-xuui7cwxUfGZDeJGBpsvCZNceuMD20DxLsDYKMuHUKmruuk0nBeJpZE1ApwmsJUPX6fWlZj-V-RhYzE72icsycpqmJFcd-Fri9mu662EN"});return(new u.d).set("Authorization","key=AAAAAK4x17k:APA91bEGgK5wCHTH7cKSrhJ8hfEjYpP3S7-xuui7cwxUfGZDeJGBpsvCZNceuMD20DxLsDYKMuHUKmruuk0nBeJpZE1ApwmsJUPX6fWlZj-V-RhYzE72icsycpqmJFcd-Fri9mu662EN"),this.http.post("https://fcm.googleapis.com/fcm/send",e,{headers:t})}catch(n){console.log(n)}}else console.log("Unable to send FCM message, no token exists.")}},{key:"constructFCMPayload",value:function(e){return console.log(this.uniquemessageid),JSON.stringify({to:e,data:{via:"She Reign",count:this.uniquemessageid,title:this.title,body:this.text,type:this.type,senderid:this.senderid,senderimage:this.senderimage},notification:{title:this.title,body:this.text}})}},{key:"createuniqueid",value:function(){var e=Math.floor(999999999e4*Math.random()+1e4);Math.random().toString(36).substring(2,15),Math.random().toString(36).substring(2,15),this.uniquemessageid=(e+this.text).split("").sort(function(){return.5-Math.random()}).join("")}},{key:"send",value:function(){this.sendPushMessage().subscribe(function(e){console.log(e)})}},{key:"requestPerm",value:function(e){var t=this;this.angularFirebaseMessaging.requestToken.subscribe(function(e){console.log(e),t._token=e,localStorage.setItem("token",e)},function(e){console.error("No Permission "+e)})}}])&&e(i.prototype,r),s&&e(i,s),n}(),q.\u0275fac=function(e){return new(e||q)(c["\u0275\u0275directiveInject"](u.b),c["\u0275\u0275directiveInject"](C))},q.\u0275cmp=c["\u0275\u0275defineComponent"]({type:q,selectors:[["app-CreateNotification"]],decls:2,vars:0,template:function(e,t){1&e&&(c["\u0275\u0275elementStart"](0,"p"),c["\u0275\u0275text"](1," CreateNotification works!\n"),c["\u0275\u0275elementEnd"]())},styles:[""]}),q)}],D=((J=function e(){t(this,e)}).\u0275mod=c["\u0275\u0275defineNgModule"]({type:J}),J.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||J)},imports:[[a.g.forChild(K)],a.g]}),J),E=((I=function e(){t(this,e)}).\u0275mod=c["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=c["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[o.c,D]]}),I)}}])}();