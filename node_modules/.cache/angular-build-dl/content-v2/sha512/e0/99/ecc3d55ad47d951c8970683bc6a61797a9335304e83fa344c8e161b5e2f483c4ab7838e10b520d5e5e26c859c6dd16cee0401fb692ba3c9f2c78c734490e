(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"14+f":function(e,t,n){"use strict";n.r(t),n.d(t,"PushNotificationModule",function(){return F});var i=n("ofXK"),s=n("tyNb"),o=n("tk/3"),r=n("fXoL"),a=n("mrSG"),l=n("Wcq6"),c=n.n(l),d=n("LRne"),u=n("EY2u"),g=n("z6cu"),m=n("HDdC"),b=n("GyhO"),p=n("tf+s"),h=n("pxpQ"),j=n("eIep"),f=n("lJxs"),O=n("UXun"),v=n("aGrj"),S=n("JIr8"),k=n("5+tZ"),y=n("xbPD"),A=n("spgP");const M=new r.InjectionToken("angularfire2.messaging.vapid-key"),E=new r.InjectionToken("angularfire2.messaging.service-worker-registeration"),T=parseInt(c.a.SDK_VERSION,10)<8;let P=(()=>{class e{constructor(e,t,s,o,r,l){const M=new A.d(o),E=l,P=Object(d.a)(void 0).pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(()=>Object(i.A)(s)?u.a:n.e(20).then(n.bind(null,"dB9c"))),Object(f.a)(()=>Object(A.g)(e,o,t)),Object(j.a)(e=>Object(A.f)(e.name+".messaging","AngularFireMessaging",e,()=>Object(a.b)(this,void 0,void 0,function*(){const t=e.messaging();return T&&(r&&t.usePublicVapidKey(r),E&&t.useServiceWorker(yield E)),t}),[r,E])),Object(O.a)({bufferSize:1,refCount:!1}));this.requestPermission=P.pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(e=>c.a.messaging.isSupported()?e.requestPermission():Object(g.a)("Not supported."))),this.getToken=P.pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(e=>Object(a.b)(this,void 0,void 0,function*(){if(c.a.messaging.isSupported()&&"granted"===Notification.permission){if(T)return yield e.getToken();{const t=E?yield E:null;return yield e.getToken({vapidKey:r,serviceWorkerRegistration:t})}}return null})));const x=new m.a(e=>{navigator.permissions.query({name:"notifications"}).then(t=>{t.onchange=()=>e.next()})}),q=P.pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(v.a)(x),Object(v.a)(this.getToken));return this.tokenChanges=P.pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(()=>c.a.messaging.isSupported()?Object(b.a)(this.getToken,q):u.a)),this.messages=P.pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(e=>c.a.messaging.isSupported()?new m.a(t=>e.onMessage(e=>t.next(e),e=>t.error(e),()=>t.complete())):u.a)),this.requestToken=Object(d.a)(void 0).pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(()=>this.requestPermission),Object(S.a)(()=>Object(d.a)(null)),Object(k.b)(()=>this.tokenChanges)),this.deleteToken=e=>P.pipe(Object(p.a)(M.outsideAngular),Object(h.b)(M.insideAngular),Object(j.a)(t=>t.deleteToken(e||void 0)),Object(y.a)(!1)),Object(A.i)(this,P,o)}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275inject"](A.c),r["\u0275\u0275inject"](A.b,8),r["\u0275\u0275inject"](r.PLATFORM_ID),r["\u0275\u0275inject"](r.NgZone),r["\u0275\u0275inject"](M,8),r["\u0275\u0275inject"](E,8))},e.\u0275prov=Object(r["\u0275\u0275defineInjectable"])({factory:function(){return new e(Object(r["\u0275\u0275inject"])(A.c),Object(r["\u0275\u0275inject"])(A.b,8),Object(r["\u0275\u0275inject"])(r.PLATFORM_ID),Object(r["\u0275\u0275inject"])(r.NgZone),Object(r["\u0275\u0275inject"])(M,8),Object(r["\u0275\u0275inject"])(E,8))},token:e,providedIn:"any"}),e})();Object(A.e)(P,[{deleteToken:null,getToken:null,onMessage:null,onBackgroundMessage:null,onTokenRefresh:null,requestPermission:null,setBackgroundMessageHandler:null,useServiceWorker:null,usePublicVapidKey:null}]);var x=n("3Pt+"),q=n("JqCM");let w=(()=>{class e{constructor(e,t){this.http=e,this.angularFirebaseMessaging=t,this._token="DemitTalha",this.title="",this.text="",this.type="Notification",this.senderid="",this.senderimage=""}ngOnInit(){}sendPushMessage(){if(this.createuniqueid(),null==this._token)return void console.log("Unable to send FCM message, no token exists.");const e=this.constructFCMPayload("/topics/"+this._token);console.log(this._token);try{var t=new o.d({"Content-Type":"application/json; charset=UTF-8",Authorization:"key=AAAAJGLsGqo:APA91bGJ6iXUrd5AfVq9zXH6i7PDQ_JW9KpLBhRyk4PQUInUHafTpq2jm9HzwtTBSKqg19Eop3qiJbRUYOj1txusAVE3z51PGbt32T5lVuFYAQzNPSEcPeMFVKs7l-HQHRpXsDmTeHvZ"});return(new o.d).set("Authorization","key=AAAAJGLsGqo:APA91bGJ6iXUrd5AfVq9zXH6i7PDQ_JW9KpLBhRyk4PQUInUHafTpq2jm9HzwtTBSKqg19Eop3qiJbRUYOj1txusAVE3z51PGbt32T5lVuFYAQzNPSEcPeMFVKs7l-HQHRpXsDmTeHvZ"),this.http.post("https://fcm.googleapis.com/fcm/send",e,{headers:t})}catch(n){console.log(n)}}constructFCMPayload(e){return console.log(this.uniquemessageid),JSON.stringify({to:e,data:{via:"She Reign",count:this.uniquemessageid,title:this.title,body:this.text,type:this.type,senderid:this.senderid,senderimage:this.senderimage},notification:{title:this.title,body:this.text}})}createuniqueid(){var e=Math.floor(999999999e4*Math.random()+1e4);Math.random().toString(36).substring(2,15),Math.random().toString(36).substring(2,15),this.uniquemessageid=(e+this.text).split("").sort(function(){return.5-Math.random()}).join("")}send(){console.log(this.title+this.text),this.sendPushMessage().subscribe(e=>{this.title="",this.text="",console.log(e)})}requestPerm(e){this.angularFirebaseMessaging.requestToken.subscribe(e=>{console.log(e),this._token=e,localStorage.setItem("token",e)},e=>{console.error("No Permission "+e)})}}return e.\u0275fac=function(t){return new(t||e)(r["\u0275\u0275directiveInject"](o.b),r["\u0275\u0275directiveInject"](P))},e.\u0275cmp=r["\u0275\u0275defineComponent"]({type:e,selectors:[["app-CreateNotification"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-8",2,"left","18%"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-lg-12"],[1,"mt-4"],[1,"col-md-6"],[1,"mb-3"],["for","formrow-email-input",1,"form-label"],["type","text","placeholder","Enter Title Here",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],["type","text","placeholder","Enter Text Here",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","w-md",2,"float","right",3,"click"],["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"]],template:function(e,t){1&e&&(r["\u0275\u0275elementStart"](0,"div",0),r["\u0275\u0275elementStart"](1,"div",1),r["\u0275\u0275elementStart"](2,"div",2),r["\u0275\u0275elementStart"](3,"div",3),r["\u0275\u0275elementStart"](4,"div",4),r["\u0275\u0275elementStart"](5,"h4",5),r["\u0275\u0275text"](6,"Notifications"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](7,"div",1),r["\u0275\u0275elementStart"](8,"div",6),r["\u0275\u0275elementStart"](9,"div",7),r["\u0275\u0275elementStart"](10,"div",1),r["\u0275\u0275elementStart"](11,"div",8),r["\u0275\u0275elementStart"](12,"div",9),r["\u0275\u0275elementStart"](13,"label",10),r["\u0275\u0275text"](14,"Title"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](15,"input",11),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.title=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](16,"div",8),r["\u0275\u0275elementStart"](17,"div",9),r["\u0275\u0275elementStart"](18,"label",12),r["\u0275\u0275text"](19,"Text"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](20,"input",13),r["\u0275\u0275listener"]("ngModelChange",function(e){return t.text=e}),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](21,"div",7),r["\u0275\u0275elementStart"](22,"button",14),r["\u0275\u0275listener"]("click",function(){return t.send()}),r["\u0275\u0275text"](23,"Submit"),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementStart"](24,"ngx-spinner",15),r["\u0275\u0275elementStart"](25,"p",16),r["\u0275\u0275text"](26,"Loading..."),r["\u0275\u0275elementEnd"](),r["\u0275\u0275elementEnd"]()),2&e&&(r["\u0275\u0275advance"](15),r["\u0275\u0275property"]("ngModel",t.title),r["\u0275\u0275advance"](5),r["\u0275\u0275property"]("ngModel",t.text))},directives:[x.c,x.o,x.r,q.a],styles:[""]}),e})();const I=[{path:"send-notification",component:w},{path:"",component:w}];let C=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[s.g.forChild(I)],s.g]}),e})();var N=n("1kSV"),H=n("oOf3"),z=n("cudM"),J=n("cZdB");let F=(()=>{class e{}return e.\u0275mod=r["\u0275\u0275defineNgModule"]({type:e}),e.\u0275inj=r["\u0275\u0275defineInjector"]({factory:function(t){return new(t||e)},imports:[[i.c,C,x.k,x.u,N.d,H.a,z.Ng2OrderModule,J.b,N.s,q.b]]}),e})()}}]);