!function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"14+f":function(n,i,r){"use strict";r.r(i),r.d(i,"PushNotificationModule",function(){return D});var o,a=r("ofXK"),s=r("tyNb"),c=r("tk/3"),u=r("fXoL"),l=r("mrSG"),d=r("Wcq6"),g=r.n(d),b=r("LRne"),f=r("EY2u"),m=r("z6cu"),p=r("HDdC"),h=r("GyhO"),j=r("tf+s"),v=r("pxpQ"),O=r("eIep"),k=r("lJxs"),y=r("UXun"),S=r("aGrj"),A=r("JIr8"),x=r("5+tZ"),M=r("xbPD"),E=r("spgP"),w=new u.InjectionToken("angularfire2.messaging.vapid-key"),T=new u.InjectionToken("angularfire2.messaging.service-worker-registeration"),P=parseInt(g.a.SDK_VERSION,10)<8,q=((o=function e(n,i,o,s,c,u){var d=this;t(this,e);var w=new E.d(s),T=u,q=Object(b.a)(void 0).pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(){return Object(a.A)(o)?f.a:r.e(20).then(r.bind(null,"dB9c"))}),Object(k.a)(function(){return Object(E.g)(n,s,i)}),Object(O.a)(function(e){return Object(E.f)(e.name+".messaging","AngularFireMessaging",e,function(){return Object(l.b)(d,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.messaging(),t.t0=P,!t.t0){t.next=11;break}if(c&&n.usePublicVapidKey(c),t.t1=T,!t.t1){t.next=11;break}return t.t2=n,t.next=9,T;case 9:t.t3=t.sent,t.t2.useServiceWorker.call(t.t2,t.t3);case 11:return t.abrupt("return",n);case 12:case"end":return t.stop()}},t)}))},[c,T])}),Object(y.a)({bufferSize:1,refCount:!1}));this.requestPermission=q.pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(e){return g.a.messaging.isSupported()?e.requestPermission():Object(m.a)("Not supported.")})),this.getToken=q.pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(e){return Object(l.b)(d,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!g.a.messaging.isSupported()||"granted"!==Notification.permission){t.next=16;break}if(!P){t.next=5;break}return t.next=4,e.getToken();case 4:return t.abrupt("return",t.sent);case 5:if(!T){t.next=11;break}return t.next=8,T;case 8:t.t0=t.sent,t.next=12;break;case 11:t.t0=null;case 12:return n=t.t0,t.next=15,e.getToken({vapidKey:c,serviceWorkerRegistration:n});case 15:return t.abrupt("return",t.sent);case 16:return t.abrupt("return",null);case 17:case"end":return t.stop()}},t)}))}));var C=new p.a(function(e){navigator.permissions.query({name:"notifications"}).then(function(t){t.onchange=function(){return e.next()}})}),I=q.pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(S.a)(C),Object(S.a)(this.getToken));return this.tokenChanges=q.pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(){return g.a.messaging.isSupported()?Object(h.a)(d.getToken,I):f.a})),this.messages=q.pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(e){return g.a.messaging.isSupported()?new p.a(function(t){return e.onMessage(function(e){return t.next(e)},function(e){return t.error(e)},function(){return t.complete()})}):f.a})),this.requestToken=Object(b.a)(void 0).pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(){return d.requestPermission}),Object(A.a)(function(){return Object(b.a)(null)}),Object(x.b)(function(){return d.tokenChanges})),this.deleteToken=function(e){return q.pipe(Object(j.a)(w.outsideAngular),Object(v.b)(w.insideAngular),Object(O.a)(function(t){return t.deleteToken(e||void 0)}),Object(M.a)(!1))},Object(E.i)(this,q,s)}).\u0275fac=function(e){return new(e||o)(u["\u0275\u0275inject"](E.c),u["\u0275\u0275inject"](E.b,8),u["\u0275\u0275inject"](u.PLATFORM_ID),u["\u0275\u0275inject"](u.NgZone),u["\u0275\u0275inject"](w,8),u["\u0275\u0275inject"](T,8))},o.\u0275prov=Object(u["\u0275\u0275defineInjectable"])({factory:function(){return new o(Object(u["\u0275\u0275inject"])(E.c),Object(u["\u0275\u0275inject"])(E.b,8),Object(u["\u0275\u0275inject"])(u.PLATFORM_ID),Object(u["\u0275\u0275inject"])(u.NgZone),Object(u["\u0275\u0275inject"])(w,8),Object(u["\u0275\u0275inject"])(T,8))},token:o,providedIn:"any"}),o);Object(E.e)(q,[{deleteToken:null,getToken:null,onMessage:null,onBackgroundMessage:null,onTokenRefresh:null,requestPermission:null,setBackgroundMessageHandler:null,useServiceWorker:null,usePublicVapidKey:null}]);var C,I,N,R=r("3Pt+"),H=r("JqCM"),z=((C=function(){function n(e,i){t(this,n),this.http=e,this.angularFirebaseMessaging=i,this._token="DemitTalha",this.title="",this.text="",this.type="Notification",this.senderid="",this.senderimage=""}var i,r,o;return i=n,(r=[{key:"ngOnInit",value:function(){}},{key:"sendPushMessage",value:function(){if(this.createuniqueid(),null!=this._token){var e=this.constructFCMPayload("/topics/"+this._token);console.log(this._token);try{var t=new c.d({"Content-Type":"application/json; charset=UTF-8",Authorization:"key=AAAAJGLsGqo:APA91bGJ6iXUrd5AfVq9zXH6i7PDQ_JW9KpLBhRyk4PQUInUHafTpq2jm9HzwtTBSKqg19Eop3qiJbRUYOj1txusAVE3z51PGbt32T5lVuFYAQzNPSEcPeMFVKs7l-HQHRpXsDmTeHvZ"});return(new c.d).set("Authorization","key=AAAAJGLsGqo:APA91bGJ6iXUrd5AfVq9zXH6i7PDQ_JW9KpLBhRyk4PQUInUHafTpq2jm9HzwtTBSKqg19Eop3qiJbRUYOj1txusAVE3z51PGbt32T5lVuFYAQzNPSEcPeMFVKs7l-HQHRpXsDmTeHvZ"),this.http.post("https://fcm.googleapis.com/fcm/send",e,{headers:t})}catch(n){console.log(n)}}else console.log("Unable to send FCM message, no token exists.")}},{key:"constructFCMPayload",value:function(e){return console.log(this.uniquemessageid),JSON.stringify({to:e,data:{via:"She Reign",count:this.uniquemessageid,title:this.title,body:this.text,type:this.type,senderid:this.senderid,senderimage:this.senderimage},notification:{title:this.title,body:this.text}})}},{key:"createuniqueid",value:function(){var e=Math.floor(999999999e4*Math.random()+1e4);Math.random().toString(36).substring(2,15),Math.random().toString(36).substring(2,15),this.uniquemessageid=(e+this.text).split("").sort(function(){return.5-Math.random()}).join("")}},{key:"send",value:function(){var e=this;console.log(this.title+this.text),this.sendPushMessage().subscribe(function(t){e.title="",e.text="",console.log(t)})}},{key:"requestPerm",value:function(e){var t=this;this.angularFirebaseMessaging.requestToken.subscribe(function(e){console.log(e),t._token=e,localStorage.setItem("token",e)},function(e){console.error("No Permission "+e)})}}])&&e(i.prototype,r),o&&e(i,o),n}()).\u0275fac=function(e){return new(e||C)(u["\u0275\u0275directiveInject"](c.b),u["\u0275\u0275directiveInject"](q))},C.\u0275cmp=u["\u0275\u0275defineComponent"]({type:C,selectors:[["app-CreateNotification"]],decls:27,vars:2,consts:[[1,"container-fluid"],[1,"row"],[1,"col-lg-8",2,"left","18%"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"col-lg-12"],[1,"mt-4"],[1,"col-md-6"],[1,"mb-3"],["for","formrow-email-input",1,"form-label"],["type","text","placeholder","Enter Title Here",1,"form-control",3,"ngModel","ngModelChange"],[1,"form-label"],["type","text","placeholder","Enter Text Here",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","w-md",2,"float","right",3,"click"],["bdColor","rgba(51,51,51,0.8)","size","medium","color","#fff","type","ball-scale-multiple"],[2,"font-size","20px","color","white"]],template:function(e,t){1&e&&(u["\u0275\u0275elementStart"](0,"div",0),u["\u0275\u0275elementStart"](1,"div",1),u["\u0275\u0275elementStart"](2,"div",2),u["\u0275\u0275elementStart"](3,"div",3),u["\u0275\u0275elementStart"](4,"div",4),u["\u0275\u0275elementStart"](5,"h4",5),u["\u0275\u0275text"](6,"Notifications"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](7,"div",1),u["\u0275\u0275elementStart"](8,"div",6),u["\u0275\u0275elementStart"](9,"div",7),u["\u0275\u0275elementStart"](10,"div",1),u["\u0275\u0275elementStart"](11,"div",8),u["\u0275\u0275elementStart"](12,"div",9),u["\u0275\u0275elementStart"](13,"label",10),u["\u0275\u0275text"](14,"Title"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](15,"input",11),u["\u0275\u0275listener"]("ngModelChange",function(e){return t.title=e}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](16,"div",8),u["\u0275\u0275elementStart"](17,"div",9),u["\u0275\u0275elementStart"](18,"label",12),u["\u0275\u0275text"](19,"Text"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](20,"input",13),u["\u0275\u0275listener"]("ngModelChange",function(e){return t.text=e}),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](21,"div",7),u["\u0275\u0275elementStart"](22,"button",14),u["\u0275\u0275listener"]("click",function(){return t.send()}),u["\u0275\u0275text"](23,"Submit"),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementStart"](24,"ngx-spinner",15),u["\u0275\u0275elementStart"](25,"p",16),u["\u0275\u0275text"](26,"Loading..."),u["\u0275\u0275elementEnd"](),u["\u0275\u0275elementEnd"]()),2&e&&(u["\u0275\u0275advance"](15),u["\u0275\u0275property"]("ngModel",t.title),u["\u0275\u0275advance"](5),u["\u0275\u0275property"]("ngModel",t.text))},directives:[R.c,R.o,R.r,H.a],styles:[""]}),C),J=[{path:"send-notification",component:z},{path:"",component:z}],F=((I=function e(){t(this,e)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:I}),I.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||I)},imports:[[s.g.forChild(J)],s.g]}),I),V=r("1kSV"),G=r("oOf3"),K=r("cudM"),U=r("cZdB"),D=((N=function e(){t(this,e)}).\u0275mod=u["\u0275\u0275defineNgModule"]({type:N}),N.\u0275inj=u["\u0275\u0275defineInjector"]({factory:function(e){return new(e||N)},imports:[[a.c,F,R.k,R.u,V.d,G.a,K.Ng2OrderModule,U.b,V.s,H.b]]}),N)}}])}();