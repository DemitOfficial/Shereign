{"version":3,"file":"ngx-bar-rating.js","sources":["../../../projects/ngx-bar-rating/src/lib/bar-rating.ts","../../../projects/ngx-bar-rating/src/lib/bar-rating.pipe.ts","../../../projects/ngx-bar-rating/src/lib/bar-rating.module.ts","../../../projects/ngx-bar-rating/src/ngx-bar-rating.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  Input,\n  Output,\n  EventEmitter,\n  OnInit,\n  OnChanges,\n  SimpleChanges,\n  ChangeDetectorRef,\n  ChangeDetectionStrategy,\n  forwardRef\n} from '@angular/core';\nimport { ControlValueAccessor, Validator, NG_VALIDATORS, NG_VALUE_ACCESSOR, FormControl } from '@angular/forms';\n\n/** This allows support [(ngModel)] and ngControl. */\nconst RATING_VALUE_ACCESSOR = {\n  provide: NG_VALUE_ACCESSOR,\n  useExisting: forwardRef(() => BarRating),\n  multi: true\n};\n\n/** This allows control required validation. */\nconst RATING_VALUE_VALIDATOR = {\n  provide: NG_VALIDATORS,\n  useExisting: forwardRef(() => BarRating),\n  multi: true,\n};\n\n@Component({\n  selector: 'bar-rating',\n  templateUrl: './bar-rating.html',\n  styleUrls: ['./bar-rating.scss'],\n  providers: [RATING_VALUE_ACCESSOR, RATING_VALUE_VALIDATOR],\n  changeDetection: ChangeDetectionStrategy.OnPush\n})\nexport class BarRating implements OnInit, OnChanges, ControlValueAccessor, Validator {\n\n  contexts: { fraction: boolean, selected: boolean, active: boolean, click: (e) => void, enter: () => void }[] = [];\n  nextRate: number;\n  disabled: boolean;\n\n  /** Current rating. Can be a decimal value like 3.14 */\n  @Input() rate;\n\n  /** Maximal rating that can be given using this widget. */\n  @Input() max = 5;\n\n  /** A flag indicating if rating can be updated. */\n  @Input() readOnly = false;\n\n  /** Set the theme */\n  @Input() theme = 'default';\n\n  /** Show rating title */\n  @Input() showText = false;\n\n  /** Replace rate value with a title */\n  @Input() titles = [];\n\n  /** A flag indicating if rating is required for form validation. */\n  @Input() required = false;\n\n  /**\n   * An event fired when a user is hovering over a given rating.\n   * Event's payload equals to the rating being hovered over.\n   */\n  @Output() hover = new EventEmitter<number>();\n\n  /**\n   * An event fired when a user stops hovering over a given rating.\n   * Event's payload equals to the rating of the last item being hovered over.\n   */\n  @Output() leave = new EventEmitter<number>();\n\n  /**\n   * An event fired when a user selects a new rating.\n   * Event's payload equals to the newly selected rating.\n   */\n  @Output() rateChange = new EventEmitter<number>(true);\n\n  constructor(private changeDetectorRef: ChangeDetectorRef) {\n  }\n\n  ngOnChanges(changes: SimpleChanges): void {\n    if (changes.rate) {\n      this.update(this.rate);\n    }\n  }\n\n  ngOnInit(): void {\n    this.contexts = Array.from({ length: this.max }, (context, i) => ({\n      selected: false,\n      fraction: false,\n      active: false,\n      click: (e) => this.handleClick(e, i + 1),\n      enter: () => this.handleEnter(i + 1)\n    }));\n\n    this.updateState(this.rate);\n  }\n\n  update(newRate: number, internalChange = true): void {\n    if (!this.readOnly && !this.disabled && this.rate !== newRate) {\n      this.rate = newRate;\n      this.rateChange.emit(this.rate);\n    }\n    if (internalChange) {\n      this.onChange(this.rate);\n      this.onTouched();\n    }\n    this.updateState(this.rate);\n  }\n\n  /** Reset rate value */\n  reset(): void {\n    this.leave.emit(this.nextRate);\n    this.updateState(this.rate);\n  }\n\n  private updateState(nextValue): void {\n    /** Set rate value as text */\n    this.nextRate = nextValue - 1;\n    /** Set the rating */\n    this.contexts = Array.from({ length: this.max }, (context, index) => ({\n      selected: index + 1 <= nextValue,\n      fraction: (index + 1 === Math.round(nextValue) && nextValue % 1) >= 0.5,\n      active: false,\n      click: (e) => this.handleClick(e, index),\n      enter: () => this.handleEnter(index)\n    }));\n  }\n\n  private handleClick(e, value): void {\n    /** (NOT TESTED) Remove 300ms click delay on touch devices */\n    e.preventDefault();\n    e.stopPropagation();\n    this.update(value + 1);\n  }\n\n  private handleEnter(index): void {\n    if (!this.disabled && !this.readOnly) {\n      /** Add selected class for rating hover */\n      this.contexts.map((context, i) => {\n        context.active = i <= index;\n        context.fraction = false;\n        context.selected = false;\n      });\n      this.nextRate = index;\n      this.hover.emit(index);\n    }\n  }\n\n  /** This is the initial value set to the component */\n  writeValue(value: number): void {\n    this.update(value, false);\n    this.changeDetectorRef.markForCheck();\n  }\n\n  validate(c: FormControl): { required: boolean } | null {\n    return (this.required && !c.value) ? { required: true } : null;\n  }\n\n  onChange = (_: any) => {\n  };\n  onTouched = () => {\n  };\n\n  registerOnChange(fn: (value: any) => any): void {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => any): void {\n    this.onTouched = fn;\n  }\n\n  setDisabledState(isDisabled: boolean): void {\n    this.disabled = isDisabled;\n  }\n\n}\n","import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'rateTitle'\n})\nexport class BarRatingPipe implements PipeTransform {\n\n  transform(value: number = 0, titles?: any): string {\n    /** Initialize value with 0 in case of undefined */\n    return titles[value] || value + 1;\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { BarRating } from './bar-rating';\nimport { BarRatingPipe } from './bar-rating.pipe';\n\n@NgModule({\n  declarations: [BarRating, BarRatingPipe],\n  imports: [\n    CommonModule,\n    FormsModule\n  ],\n  exports: [BarRating]\n})\nexport class BarRatingModule {\n}\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n\nexport {BarRatingPipe as ɵa} from './lib/bar-rating.pipe';"]}